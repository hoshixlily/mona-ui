<div class="mona-grid-cell" [attr.tabindex]="0" cdkMonitorSubtreeFocus (cdkFocusChange)="onFocusChange($event)" [ngClass]="{'mona-grid-cell-editing': editing}">
    <ng-container *ngIf="!editing">
        <ng-container *ngIf="!column.cellTemplate">
            <span class="mona-grid-cell-text">{{row.data[column.field]}}</span>
        </ng-container>
        <ng-container [ngTemplateOutlet]="column.cellTemplate.templateRef ?? null"
                      *ngIf="column.cellTemplate" [ngTemplateOutletContext]="{$implicit: row, column}"></ng-container>
    </ng-container>
    <ng-container [ngTemplateOutlet]="cellEditTemplate" *ngIf="editing"></ng-container>
</div>

<ng-template #cellEditTemplate>
    <form [formGroup]="editForm">
        <ng-container *ngIf="column.filterType==='string'">
            <mona-text-box [formControlName]="column.field" #stringEditElement></mona-text-box>
        </ng-container>
        <ng-container *ngIf="column.filterType==='number'">
            <mona-numeric-text-box [formControlName]="column.field"></mona-numeric-text-box>
        </ng-container>
        <ng-container *ngIf="column.filterType==='date'">
            <mona-date-picker [formControlName]="column.field" (valueChange)="onDateChange($event)"></mona-date-picker>
        </ng-container>
        <ng-container *ngIf="column.filterType==='boolean'">
            <input type="checkbox" [formControlName]="column.field" monaCheckBox />
        </ng-container>
    </form>
</ng-template>
