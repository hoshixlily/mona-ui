<div class="mona-tree-view-node" #nodeElement>
    <div class="mona-tree-view-drop-magnet" *ngIf="dragging && dropMagnetVisible && dropPosition==='before'" [attr.data-nid]="node.uid" [attr.data-pos]="'before'">
        <fa-icon [icon]="dropMagnetIcon"></fa-icon>
        <div></div>
    </div>
    <div class="mona-tree-node-expander" (click)="onExpandToggle($event)"
         [ngClass]="{'mona-interactive': node.nodes.length !== 0, 'mona-disabled': node.disabled}"
         *ngIf="treeViewService.expandableOptions.enabled">
        <fa-icon [icon]="expandIcon" *ngIf="node.nodes.length !== 0 && !node.expanded"></fa-icon>
        <fa-icon [icon]="collapseIcon" *ngIf="node.nodes.length !== 0 && node.expanded"></fa-icon>
    </div>
    <div class="mona-tree-node-content"  [ngClass]="{'mona-disabled': node.disabled}">
        <input type="checkbox" id="mona-tree-node-checkbox-{{node.uid}}" [indeterminate]="node.indeterminate" [disabled]="node.disabled"
               [ngModel]="node.checked" (ngModelChange)="onCheckToggle($event)" monaCheckBox *ngIf="treeViewService.checkableOptions.enabled">
        <label for="mona-tree-node-checkbox-{{node.uid}}"></label>
        <div class="mona-tree-view-node-text" [ngClass]="{'mona-tree-view-node-selected': node.selected, 'mona-tree-view-node-dropping': dragging && dropPosition==='inside', 'mona-tree-view-node-focused': node.focused()}"
             (click)="click$.next($event)"
             (dblclick)="click$.next($event)"
             (contextmenu)="onNodeClick($event, 'contextmenu')">
            <ng-container *ngIf="!nodeTextTemplate">{{node.text}}</ng-container>
            <ng-container [ngTemplateOutlet]="nodeTextTemplate" [ngTemplateOutletContext]="{$implicit: node.data, node: node}" *ngIf="!!nodeTextTemplate"></ng-container>
        </div>
    </div>
    <div class="mona-tree-view-drop-magnet" *ngIf="dragging && dropMagnetVisible && dropPosition==='after'" [attr.data-nid]="node.uid" [attr.data-pos]="'after'">
        <fa-icon [icon]="dropMagnetIcon"></fa-icon>
        <div></div>
    </div>
</div>
