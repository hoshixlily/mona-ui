@if (filterable) {
    <mona-filter-input [filter]="filterText()"
                       (filterChange)="filter$.next($event.filter)"
                       class="mona-popup-filter-input"
    ></mona-filter-input>
}
<ul class="mona-list" [attr.tabindex]="-1">
    @if (popupListService.viewListData.length !== 0) {
        <ng-container *ngFor="let group of popupListService.viewListData">
            <ng-container *ngIf="$any(group.source).length !== 0">
                <ng-container *ngIf="!groupTemplate">
                    <li class="mona-list-group-header" *ngIf="group.key">{{group.key}}</li>
                </ng-container>
                <ng-container *ngIf="groupTemplate && group.key">
                    <li class="mona-list-group-header">
                        <ng-container [ngTemplateOutlet]="groupTemplate"
                                      [ngTemplateOutletContext]="{$implicit: group.key}"></ng-container>
                    </li>
                </ng-container>
            </ng-container>
            <li class="mona-list-item" *ngFor="let item of group.source" (click)="onListItemClick(item, $event)"
                [ngClass]="{'mona-selected': item.selected(), 'mona-highlighted': item.highlighted(), 'mona-disabled': item.disabled}">
                <mona-popup-list-item [item]="item" [itemTemplate]="itemTemplate"></mona-popup-list-item>
            </li>
        </ng-container>
    } @else {
        <div class="mona-list-no-data">No data.</div>
    }
</ul>
