<div class="mona-dropdown-list" [ngClass]="{'mona-disabled': disabled}"
     [attr.tabindex]="disabled ? -1 : 0" (click)="open()" #dropdownWrapper>
    <div class="mona-dropdown-value">
        @if (!valueTemplate) {
            @if (valuePopupListItem) {
                <span>{{valuePopupListItem?.text}}</span>
            } @else {
                <span>{{placeholder}}</span>
            }
        } @else {
            <ng-container [ngTemplateOutlet]="valueTemplate" [ngTemplateOutletContext]="{$implicit: valuePopupListItem?.data, listItem: valuePopupListItem}"></ng-container>
        }
    </div>
    @if (showClearButton && valuePopupListItem) {
        <span class="mona-input-clear-icon" (click)="clearValue($event)">
            <fa-icon [icon]="clearIcon"></fa-icon>
        </span>
    }
    <button monaButton class="mona-input-button">
        <fa-icon [icon]="dropdownIcon"></fa-icon>
    </button>
</div>

<ng-template #popupTemplate>
    <div class="mona-dropdown-popup-list-wrapper">
        <mona-popup-list [textField]="textField" [valueField]="valueField" [groupField]="groupField" [value]="value ? [value] : []"
                         [filterable]="filterable"
                         (valueChange)="onPopupListValueChange($event)">
            @if (itemTemplate) {
                <ng-template monaListItemTemplate let-dataItem let-listItem="listItem">
                    <ng-container [ngTemplateOutlet]="itemTemplate" [ngTemplateOutletContext]="{$implicit: dataItem, listItem}"></ng-container>
                </ng-template>
            }
            @if (groupTemplate) {
                <ng-template monaListGroupTemplate let-dataItem let-listItem="listItem">
                    <ng-container [ngTemplateOutlet]="groupTemplate" [ngTemplateOutletContext]="{$implicit: dataItem, listItem}"></ng-container>
                </ng-template>
            }
        </mona-popup-list>
    </div>
</ng-template>
