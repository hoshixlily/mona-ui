<div class="mona-dropdown-tree" [ngClass]="{'mona-disabled': disabled}"
     [attr.tabindex]="disabled ? -1 : 0" (click)="open()" #dropdownWrapper>
    <div class="mona-dropdown-value">
        <span>{{text()}}</span>
    </div>
    <button monaButton class="mona-input-button">
        <fa-icon [icon]="dropdownIcon"></fa-icon>
    </button>
</div>

<ng-template #popupTemplate>
    <div class="mona-dropdown-tree-popup-wrapper">
        @if (treeService.filterableOptions().enabled) {
            <div class="mona-dropdown-tree-filter">
                <mona-filter-input [filter]="treeService.filterText()"
                                   [debounce]="treeService.filterableOptions().debounce"
                                   [placeholder]="treeService.filterPlaceholder()"
                                   (filterChange)="onFilterChange($event)"></mona-filter-input>
            </div>
        }
        <div class="mona-dropdown-tree-container">
            <mona-tree>
                @if (nodeTemplate) {
                    <ng-template monaTreeNodeTemplate let-dataItem>
                        <ng-container [ngTemplateOutlet]="nodeTemplate"
                                      [ngTemplateOutletContext]="{$implicit: dataItem}"></ng-container>
                    </ng-template>
                }
            </mona-tree>
        </div>
    </div>
</ng-template>