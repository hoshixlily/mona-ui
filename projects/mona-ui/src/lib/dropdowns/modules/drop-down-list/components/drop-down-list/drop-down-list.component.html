<div class="mona-dropdown mona-dropdown-list" [attr.tabindex]="disabled ? -1 : 0"
     (click)="open()" (keydown.enter)="open()"
     #dropdownWrapper>
    <div class="mona-dropdown-list-value">
        <ng-container *ngIf="!valueTemplate">
            <span>{{selectedListItems[0]?.text ?? value}}</span>
        </ng-container>
        <ng-container *ngIf="valueTemplate">
            <ng-container [ngTemplateOutlet]="valueTemplate"
                          [ngTemplateOutletContext]="{$implicit: selectedListItems[0]?.data ?? value, listItem: selectedListItems[0]}"></ng-container>
        </ng-container>
    </div>
    <div class="mona-dropdown-list-menu">
        <fa-icon [icon]="dropdownIcon"></fa-icon>
    </div>
</div>

<ng-template #dropdownPopupTemplate>
    <mona-list [listData]="listData" [textField]="textField" [valueField]="valueField" [groupField]="groupField" [itemDisabler]="itemDisabler"
               [value]="selectedListItems" (valueChange)="onSelectedListItemsChange($event)">
        <ng-container *ngIf="itemTemplate">
            <ng-template monaListItemTemplate let-dataItem let-listItem="listItem">
                <ng-container [ngTemplateOutlet]="itemTemplate ?? null" [ngTemplateOutletContext]="{$implicit: dataItem, listItem}"></ng-container>
            </ng-template>
        </ng-container>
        <ng-container *ngIf="groupTemplate">
            <ng-template monaListGroupTemplate let-dataItem let-listItem="listItem">
                <ng-container [ngTemplateOutlet]="groupTemplate ?? null" [ngTemplateOutletContext]="{$implicit: dataItem, listItem}"></ng-container>
            </ng-template>
        </ng-container>
    </mona-list>
</ng-template>
