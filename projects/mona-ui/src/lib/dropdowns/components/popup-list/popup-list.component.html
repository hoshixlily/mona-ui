<ul class="mona-list" [attr.tabindex]="-1">
    <ng-container *ngIf="popupListService.viewListData.length !== 0; else empty;">
        <ng-container *ngIf="filterable">
            <mona-text-box class="filter-box" [ngModel]="filter$|async" (ngModelChange)="filter$.next($event)">
                <ng-template monaTextBoxPrefixTemplate>
                    <fa-icon [icon]="filterIcon"></fa-icon>
                </ng-template>
            </mona-text-box>
        </ng-container>
        <ng-container *ngFor="let group of popupListService.viewListData">
            <ng-container *ngIf="$any(group.source).length !== 0">
                <ng-container *ngIf="!groupTemplate">
                    <li class="mona-list-group-header" *ngIf="group.key">{{group.key}}</li>
                </ng-container>
                <ng-container *ngIf="groupTemplate && group.key">
                    <li class="mona-list-group-header">
                        <ng-container [ngTemplateOutlet]="groupTemplate"
                                      [ngTemplateOutletContext]="{$implicit: group.key}"></ng-container>
                    </li>
                </ng-container>
            </ng-container>
            <li class="mona-list-item" *ngFor="let item of group.source" (click)="onListItemClick(item, $event)"
                [ngClass]="{'mona-selected': item.selected, 'mona-highlighted': item.highlighted, 'mona-disabled': item.disabled}">
                <mona-popup-list-item [item]="item" [itemTemplate]="itemTemplate"></mona-popup-list-item>
            </li>
        </ng-container>
    </ng-container>
    <ng-template #empty>
        <div class="mona-list-no-data">No data.</div>
    </ng-template>
</ul>
