import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, ViewChild } from "@angular/core";
import { faAngleDoubleLeft, faAngleDoubleRight, faAngleLeft, faAngleRight, faEllipsis } from "@fortawesome/free-solid-svg-icons";
import { PageSizeChangeEvent } from "../../models/PageSizeChangeEvent";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../../../buttons/modules/button/directives/button.directive";
import * as i3 from "@fortawesome/angular-fontawesome";
import * as i4 from "../../../inputs/modules/numeric-text-box/components/numeric-text-box/numeric-text-box.component";
import * as i5 from "../../../dropdowns/modules/drop-down-list/components/drop-down-list/drop-down-list.component";
import * as i6 from "../../../pipes/slice.pipe";
export class PagerComponent {
    set pageSizeValues(values) {
        if (values === false || (Array.isArray(values) && values.length === 0)) {
            this.pageSizeValueList = [];
        }
        else if (Array.isArray(values)) {
            this.pageSizeValueList = values;
        }
        else {
            this.pageSizeValueList = [10, 20, 50, 100];
        }
    }
    constructor() {
        this.previousPageSize = 10;
        this.ellipsisIcon = faEllipsis;
        this.firstPageIcon = faAngleDoubleLeft;
        this.lastPageIcon = faAngleDoubleRight;
        this.nextIcon = faAngleRight;
        this.previousIcon = faAngleLeft;
        this.inputValue = null;
        this.pageCount = 10;
        this.page = 1;
        this.pageSizeValueList = [];
        this.pages = [];
        this.firstLast = true;
        this.pageChange = new EventEmitter();
        this.pageInput = false;
        this.pageSize = 10;
        this.pageSizeChange = new EventEmitter();
        this.previousNext = true;
        this.skip = 0;
        this.total = 0;
        this.type = "numeric";
        this.visiblePages = 5;
    }
    ngOnChanges(changes) {
        if (changes["pageSize"] || changes["total"] || changes["visiblePages"] || changes["skip"]) {
            const pageSize = changes["pageSize"] ? changes["pageSize"].currentValue : this.pageSize;
            const total = changes["total"] ? changes["total"].currentValue : this.total;
            const visiblePages = changes["visiblePages"] ? changes["visiblePages"].currentValue : this.visiblePages;
            this.pageCount = Math.ceil(total / pageSize);
            if (changes["skip"] && changes["skip"].currentValue !== changes["skip"].previousValue) {
                const skip = changes["skip"].currentValue;
                this.page = Math.floor(skip / pageSize) + 1 ?? this.page;
                this.inputValue = this.page;
            }
            this.pageCount = Math.ceil(total / pageSize);
            this.preparePages(this.page, visiblePages, this.pageCount);
        }
    }
    ngOnInit() { }
    onJumpNextClick() {
        const page = Math.min(this.page + this.visiblePages, this.pageCount);
        this.setPage(page);
    }
    onJumpPreviousClick() {
        const page = Math.max(this.page - this.visiblePages, 1);
        this.setPage(page);
    }
    onNextPageClick() {
        const page = Math.min(this.page + 1, this.pageCount);
        this.setPage(page);
    }
    onPageClick(page) {
        if (page === this.page) {
            return;
        }
        this.setPage(page);
    }
    onPageInputBlur() {
        if (this.inputValue === null || this.inputValue === this.page) {
            this.inputValue = this.page;
            return;
        }
        if (this.inputValue < 1) {
            this.inputValue = 1;
        }
        else if (this.inputValue > this.pageCount) {
            this.inputValue = this.pageCount;
        }
        this.setPage(this.inputValue);
    }
    onPageSizeValueChange(value) {
        if (value === this.pageSize) {
            return;
        }
        const event = new PageSizeChangeEvent(value, this.pageSize);
        if (this.pageSizeDropdownList) {
            this.pageSizeDropdownList.setValue(this.previousPageSize);
        }
        this.pageSizeChange.emit(event);
        if (event.isDefaultPrevented()) {
            this.pageSize = this.previousPageSize;
            if (this.pageSizeDropdownList) {
                this.pageSizeDropdownList.setValue(this.previousPageSize);
            }
            return;
        }
        this.previousPageSize = value;
        if (this.pageSizeDropdownList) {
            this.pageSizeDropdownList.setValue(value);
        }
        this.pageCount = Math.ceil(this.total / this.pageSize);
        this.setPage(1);
    }
    onPreviousPageClick() {
        const page = Math.max(this.page - 1, 1);
        this.setPage(page);
    }
    preparePages(currentPage, visiblePages, maxPages) {
        const half = Math.floor(visiblePages / 2);
        let first = 1;
        let index = 0;
        this.pages = [];
        if (maxPages <= 10) {
            for (index = 1; index <= maxPages; index++) {
                this.pages.push({ page: index, text: index.toString() });
            }
        }
        else if (currentPage < visiblePages) {
            this.pages.push({ page: first, text: first.toString() });
            for (index = 2; index < (maxPages < visiblePages ? maxPages : visiblePages) + 1; index++) {
                this.pages.push({ page: index, text: index.toString() });
            }
            this.pages.push({ page: maxPages, text: maxPages.toString() });
        }
        else if (currentPage >= visiblePages && currentPage <= maxPages - visiblePages) {
            this.pages.push({ page: first, text: first.toString() });
            for (index = currentPage - half; index < currentPage + visiblePages - half; index++) {
                this.pages.push({ page: index, text: index.toString() });
            }
            this.pages.push({ page: maxPages, text: maxPages.toString() });
        }
        else if (currentPage >= maxPages - visiblePages) {
            this.pages.push({ page: first, text: first.toString() });
            index = maxPages - visiblePages < currentPage ? maxPages - visiblePages : currentPage;
            for (; index <= maxPages; index++) {
                this.pages.push({ page: index, text: index.toString() });
            }
        }
    }
    setPage(page) {
        const skip = (page - 1) * this.pageSize;
        this.pageChange.emit({ page, skip, take: this.pageSize });
    }
    get currentPageDataCountEnd() {
        return Math.min(this.page * this.pageSize, this.total);
    }
    get currentPageDataCountStart() {
        return (this.page - 1) * this.pageSize + 1;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.0", ngImport: i0, type: PagerComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.0.0", type: PagerComponent, selector: "mona-pager", inputs: { firstLast: "firstLast", pageInput: "pageInput", pageSize: "pageSize", previousNext: "previousNext", pageSizeValues: "pageSizeValues", skip: "skip", total: "total", type: "type", visiblePages: "visiblePages" }, outputs: { pageChange: "pageChange", pageSizeChange: "pageSizeChange" }, viewQueries: [{ propertyName: "pageSizeDropdownList", first: true, predicate: ["pageSizeDropdownList"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"mona-pager\">\n    <ng-container *ngIf=\"type==='numeric'\">\n        <ol class=\"mona-pager-list\">\n            <li *ngIf=\"firstLast\">\n                <button monaButton [flat]=\"true\" (click)=\"onPageClick(1)\" [disabled]=\"page===1\">\n                    <fa-icon [icon]=\"firstPageIcon\"></fa-icon>\n                </button>\n            </li>\n            <li *ngIf=\"previousNext\">\n                <button monaButton [flat]=\"true\" [disabled]=\"page<=1\" (click)=\"onPreviousPageClick()\">\n                    <fa-icon [icon]=\"previousIcon\"></fa-icon>\n                </button>\n            </li>\n            <li *ngIf=\"pages.length !== 0\" [ngClass]=\"{'mona-pager-active': page===1}\">\n                <button monaButton [flat]=\"true\" (click)=\"onPageClick(1)\">1</button>\n            </li>\n            <li *ngIf=\"pages.length > visiblePages && pages[1].page - 1 > 1\">\n                <button monaButton [flat]=\"true\" (click)=\"onJumpPreviousClick()\">\n                    <fa-icon [icon]=\"ellipsisIcon\"></fa-icon>\n                </button>\n            </li>\n            <ng-container *ngFor=\"let pageItem of pages|monaSlice:1:pages.length-1; let px = index;\">\n                <li [attr.data-page]=\"pageItem.page\" [ngClass]=\"{'mona-pager-active': page===pageItem.page}\">\n                    <button monaButton [flat]=\"true\" (click)=\"onPageClick(pageItem.page)\">{{pageItem.text}}</button>\n                </li>\n            </ng-container>\n            <li *ngIf=\"pages.length > visiblePages && pages[pages.length-1].page - pages[pages.length-2].page > 1\">\n                <button monaButton [flat]=\"true\" (click)=\"onJumpNextClick()\">\n                    <fa-icon [icon]=\"ellipsisIcon\"></fa-icon>\n                </button>\n            </li>\n            <li *ngIf=\"pages.length > 1\" [ngClass]=\"{'mona-pager-active': page===pageCount}\">\n                <button monaButton [flat]=\"true\" (click)=\"onPageClick(pageCount)\">{{pageCount}}</button>\n            </li>\n            <li *ngIf=\"previousNext\">\n                <button monaButton [flat]=\"true\" [disabled]=\"page < 1 || page === pageCount\" (click)=\"onNextPageClick()\">\n                    <fa-icon [icon]=\"nextIcon\"></fa-icon>\n                </button>\n            </li>\n            <li *ngIf=\"firstLast\">\n                <button monaButton [flat]=\"true\" (click)=\"onPageClick(pageCount)\" [disabled]=\"page===pageCount\">\n                    <fa-icon [icon]=\"lastPageIcon\"></fa-icon>\n                </button>\n            </li>\n            <li>\n                <mona-numeric-text-box [spinners]=\"false\" [min]=\"1\" [max]=\"pageCount\" [(value)]=\"inputValue\"\n                                       (inputBlur)=\"onPageInputBlur()\" *ngIf=\"pageInput\"></mona-numeric-text-box>\n            </li>\n            <li *ngIf=\"pageSizeValueList.length !== 0\">\n                <mona-drop-down-list [data]=\"pageSizeValueList\" [value]=\"pageSize\"\n                                     (valueChange)=\"onPageSizeValueChange($event)\" #pageSizeDropdownList></mona-drop-down-list>\n                <span>items per page</span>\n            </li>\n        </ol>\n        <div class=\"mona-pager-info\">\n            <span>{{currentPageDataCountStart}} - {{currentPageDataCountEnd}} of {{total}} items</span>\n        </div>\n    </ng-container>\n    <ng-container *ngIf=\"type==='input'\">\n        <div class=\"mona-pager-input\">\n            <ol class=\"mona-pager-list\">\n                <li *ngIf=\"firstLast\">\n                    <button monaButton [flat]=\"true\" (click)=\"onPageClick(1)\" [disabled]=\"page===1\">\n                        <fa-icon [icon]=\"firstPageIcon\"></fa-icon>\n                    </button>\n                </li>\n                <li *ngIf=\"previousNext\">\n                    <button monaButton [flat]=\"true\" [disabled]=\"page<=1\" (click)=\"onPreviousPageClick()\">\n                        <fa-icon [icon]=\"previousIcon\"></fa-icon>\n                    </button>\n                </li>\n               <li>\n                   <span class=\"mona-pager-input-text\">Page</span>\n                   <mona-numeric-text-box [spinners]=\"false\" [min]=\"1\" [max]=\"pageCount\" [(value)]=\"inputValue\"\n                                          (inputBlur)=\"onPageInputBlur()\"></mona-numeric-text-box>\n                   <span class=\"mona-pager-input-text\">of</span>\n                   <span class=\"mona-pager-input-text\">{{pageCount}}</span>\n               </li>\n                <li *ngIf=\"previousNext\">\n                    <button monaButton [flat]=\"true\" [disabled]=\"page < 1 || page === pageCount\" (click)=\"onNextPageClick()\">\n                        <fa-icon [icon]=\"nextIcon\"></fa-icon>\n                    </button>\n                </li>\n                <li *ngIf=\"firstLast\">\n                    <button monaButton [flat]=\"true\" (click)=\"onPageClick(pageCount)\" [disabled]=\"page===pageCount\">\n                        <fa-icon [icon]=\"lastPageIcon\"></fa-icon>\n                    </button>\n                </li>\n            </ol>\n        </div>\n        <div class=\"mona-pager-info\">\n            <span>{{(page-1)*pageSize+1}} - {{page*pageSize > total ? total : page*pageSize}} of {{total}} items</span>\n        </div>\n    </ng-container>\n</div>\n", styles: ["div.mona-pager{display:flex;padding:5px 10px}ol.mona-pager-list{display:flex}ol.mona-pager-list li{list-style:none;display:flex;align-items:center;justify-content:center}mona-numeric-text-box{margin-left:20px;width:50px}mona-drop-down-list{margin:0 5px}div.mona-pager-input{display:flex;align-items:center}div.mona-pager-input mona-numeric-text-box{width:50px;margin:0 5px}div.mona-pager-input span{margin:0 5px}div.mona-pager-info{display:flex;align-items:center;justify-content:flex-end;flex:1 1 0;padding-left:10px}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.ButtonDirective, selector: "[monaButton]", inputs: ["disabled", "flat", "primary", "selected", "toggleable"], outputs: ["selectedChange"] }, { kind: "component", type: i3.FaIconComponent, selector: "fa-icon", inputs: ["icon", "title", "spin", "pulse", "mask", "styles", "flip", "size", "pull", "border", "inverse", "symbol", "rotate", "fixedWidth", "classes", "transform", "a11yRole"] }, { kind: "component", type: i4.NumericTextBoxComponent, selector: "mona-numeric-text-box", inputs: ["decimals", "disabled", "formatter", "max", "min", "readonly", "spinners", "step", "value"], outputs: ["inputBlur", "inputFocus", "valueChange"] }, { kind: "component", type: i5.DropDownListComponent, selector: "mona-drop-down-list", inputs: ["filterable", "value"], outputs: ["valueChange"] }, { kind: "pipe", type: i6.SlicePipe, name: "monaSlice" }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.0", ngImport: i0, type: PagerComponent, decorators: [{
            type: Component,
            args: [{ selector: "mona-pager", changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"mona-pager\">\n    <ng-container *ngIf=\"type==='numeric'\">\n        <ol class=\"mona-pager-list\">\n            <li *ngIf=\"firstLast\">\n                <button monaButton [flat]=\"true\" (click)=\"onPageClick(1)\" [disabled]=\"page===1\">\n                    <fa-icon [icon]=\"firstPageIcon\"></fa-icon>\n                </button>\n            </li>\n            <li *ngIf=\"previousNext\">\n                <button monaButton [flat]=\"true\" [disabled]=\"page<=1\" (click)=\"onPreviousPageClick()\">\n                    <fa-icon [icon]=\"previousIcon\"></fa-icon>\n                </button>\n            </li>\n            <li *ngIf=\"pages.length !== 0\" [ngClass]=\"{'mona-pager-active': page===1}\">\n                <button monaButton [flat]=\"true\" (click)=\"onPageClick(1)\">1</button>\n            </li>\n            <li *ngIf=\"pages.length > visiblePages && pages[1].page - 1 > 1\">\n                <button monaButton [flat]=\"true\" (click)=\"onJumpPreviousClick()\">\n                    <fa-icon [icon]=\"ellipsisIcon\"></fa-icon>\n                </button>\n            </li>\n            <ng-container *ngFor=\"let pageItem of pages|monaSlice:1:pages.length-1; let px = index;\">\n                <li [attr.data-page]=\"pageItem.page\" [ngClass]=\"{'mona-pager-active': page===pageItem.page}\">\n                    <button monaButton [flat]=\"true\" (click)=\"onPageClick(pageItem.page)\">{{pageItem.text}}</button>\n                </li>\n            </ng-container>\n            <li *ngIf=\"pages.length > visiblePages && pages[pages.length-1].page - pages[pages.length-2].page > 1\">\n                <button monaButton [flat]=\"true\" (click)=\"onJumpNextClick()\">\n                    <fa-icon [icon]=\"ellipsisIcon\"></fa-icon>\n                </button>\n            </li>\n            <li *ngIf=\"pages.length > 1\" [ngClass]=\"{'mona-pager-active': page===pageCount}\">\n                <button monaButton [flat]=\"true\" (click)=\"onPageClick(pageCount)\">{{pageCount}}</button>\n            </li>\n            <li *ngIf=\"previousNext\">\n                <button monaButton [flat]=\"true\" [disabled]=\"page < 1 || page === pageCount\" (click)=\"onNextPageClick()\">\n                    <fa-icon [icon]=\"nextIcon\"></fa-icon>\n                </button>\n            </li>\n            <li *ngIf=\"firstLast\">\n                <button monaButton [flat]=\"true\" (click)=\"onPageClick(pageCount)\" [disabled]=\"page===pageCount\">\n                    <fa-icon [icon]=\"lastPageIcon\"></fa-icon>\n                </button>\n            </li>\n            <li>\n                <mona-numeric-text-box [spinners]=\"false\" [min]=\"1\" [max]=\"pageCount\" [(value)]=\"inputValue\"\n                                       (inputBlur)=\"onPageInputBlur()\" *ngIf=\"pageInput\"></mona-numeric-text-box>\n            </li>\n            <li *ngIf=\"pageSizeValueList.length !== 0\">\n                <mona-drop-down-list [data]=\"pageSizeValueList\" [value]=\"pageSize\"\n                                     (valueChange)=\"onPageSizeValueChange($event)\" #pageSizeDropdownList></mona-drop-down-list>\n                <span>items per page</span>\n            </li>\n        </ol>\n        <div class=\"mona-pager-info\">\n            <span>{{currentPageDataCountStart}} - {{currentPageDataCountEnd}} of {{total}} items</span>\n        </div>\n    </ng-container>\n    <ng-container *ngIf=\"type==='input'\">\n        <div class=\"mona-pager-input\">\n            <ol class=\"mona-pager-list\">\n                <li *ngIf=\"firstLast\">\n                    <button monaButton [flat]=\"true\" (click)=\"onPageClick(1)\" [disabled]=\"page===1\">\n                        <fa-icon [icon]=\"firstPageIcon\"></fa-icon>\n                    </button>\n                </li>\n                <li *ngIf=\"previousNext\">\n                    <button monaButton [flat]=\"true\" [disabled]=\"page<=1\" (click)=\"onPreviousPageClick()\">\n                        <fa-icon [icon]=\"previousIcon\"></fa-icon>\n                    </button>\n                </li>\n               <li>\n                   <span class=\"mona-pager-input-text\">Page</span>\n                   <mona-numeric-text-box [spinners]=\"false\" [min]=\"1\" [max]=\"pageCount\" [(value)]=\"inputValue\"\n                                          (inputBlur)=\"onPageInputBlur()\"></mona-numeric-text-box>\n                   <span class=\"mona-pager-input-text\">of</span>\n                   <span class=\"mona-pager-input-text\">{{pageCount}}</span>\n               </li>\n                <li *ngIf=\"previousNext\">\n                    <button monaButton [flat]=\"true\" [disabled]=\"page < 1 || page === pageCount\" (click)=\"onNextPageClick()\">\n                        <fa-icon [icon]=\"nextIcon\"></fa-icon>\n                    </button>\n                </li>\n                <li *ngIf=\"firstLast\">\n                    <button monaButton [flat]=\"true\" (click)=\"onPageClick(pageCount)\" [disabled]=\"page===pageCount\">\n                        <fa-icon [icon]=\"lastPageIcon\"></fa-icon>\n                    </button>\n                </li>\n            </ol>\n        </div>\n        <div class=\"mona-pager-info\">\n            <span>{{(page-1)*pageSize+1}} - {{page*pageSize > total ? total : page*pageSize}} of {{total}} items</span>\n        </div>\n    </ng-container>\n</div>\n", styles: ["div.mona-pager{display:flex;padding:5px 10px}ol.mona-pager-list{display:flex}ol.mona-pager-list li{list-style:none;display:flex;align-items:center;justify-content:center}mona-numeric-text-box{margin-left:20px;width:50px}mona-drop-down-list{margin:0 5px}div.mona-pager-input{display:flex;align-items:center}div.mona-pager-input mona-numeric-text-box{width:50px;margin:0 5px}div.mona-pager-input span{margin:0 5px}div.mona-pager-info{display:flex;align-items:center;justify-content:flex-end;flex:1 1 0;padding-left:10px}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { firstLast: [{
                type: Input
            }], pageChange: [{
                type: Output
            }], pageInput: [{
                type: Input
            }], pageSize: [{
                type: Input
            }], pageSizeChange: [{
                type: Output
            }], pageSizeDropdownList: [{
                type: ViewChild,
                args: ["pageSizeDropdownList"]
            }], previousNext: [{
                type: Input
            }], pageSizeValues: [{
                type: Input
            }], skip: [{
                type: Input
            }], total: [{
                type: Input
            }], type: [{
                type: Input
            }], visiblePages: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbW9uYS11aS9zcmMvbGliL3BhZ2VyL2NvbXBvbmVudHMvcGFnZXIvcGFnZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbW9uYS11aS9zcmMvbGliL3BhZ2VyL2NvbXBvbmVudHMvcGFnZXIvcGFnZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNILHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEVBRU4sU0FBUyxFQUNaLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFDSCxpQkFBaUIsRUFDakIsa0JBQWtCLEVBQ2xCLFdBQVcsRUFDWCxZQUFZLEVBQ1osVUFBVSxFQUViLE1BQU0sbUNBQW1DLENBQUM7QUFFM0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7Ozs7Ozs7O0FBU3ZFLE1BQU0sT0FBTyxjQUFjO0lBa0N2QixJQUNXLGNBQWMsQ0FBQyxNQUEwQjtRQUNoRCxJQUFJLE1BQU0sS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDcEUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEVBQUUsQ0FBQztTQUMvQjthQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUM5QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDO1NBQ25DO2FBQU07WUFDSCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUM5QztJQUNMLENBQUM7SUFjRDtR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dGVjdGlvblN0cmF0ZWd5LFxuICAgIENvbXBvbmVudCxcbiAgICBFdmVudEVtaXR0ZXIsXG4gICAgSW5wdXQsXG4gICAgT25DaGFuZ2VzLFxuICAgIE9uSW5pdCxcbiAgICBPdXRwdXQsXG4gICAgU2ltcGxlQ2hhbmdlcyxcbiAgICBWaWV3Q2hpbGRcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1BhZ2VcIjtcbmltcG9ydCB7XG4gICAgZmFBbmdsZURvdWJsZUxlZnQsXG4gICAgZmFBbmdsZURvdWJsZVJpZ2h0LFxuICAgIGZhQW5nbGVMZWZ0LFxuICAgIGZhQW5nbGVSaWdodCxcbiAgICBmYUVsbGlwc2lzLFxuICAgIEljb25EZWZpbml0aW9uXG59IGZyb20gXCJAZm9ydGF3ZXNvbWUvZnJlZS1zb2xpZC1zdmctaWNvbnNcIjtcbmltcG9ydCB7IFBhZ2VDaGFuZ2VFdmVudCB9IGZyb20gXCIuLi8uLi9tb2RlbHMvUGFnZUNoYW5nZUV2ZW50XCI7XG5pbXBvcnQgeyBQYWdlU2l6ZUNoYW5nZUV2ZW50IH0gZnJvbSBcIi4uLy4uL21vZGVscy9QYWdlU2l6ZUNoYW5nZUV2ZW50XCI7XG5pbXBvcnQgeyBEcm9wRG93bkxpc3RDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vLi4vZHJvcGRvd25zL21vZHVsZXMvZHJvcC1kb3duLWxpc3QvY29tcG9uZW50cy9kcm9wLWRvd24tbGlzdC9kcm9wLWRvd24tbGlzdC5jb21wb25lbnRcIjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwibW9uYS1wYWdlclwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi4vcGFnZXIuY29tcG9uZW50Lmh0bWxcIixcbiAgICBzdHlsZVVybHM6IFtcIi4vcGFnZXIuY29tcG9uZW50LnNjc3NcIl0sXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgUGFnZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gICAgcHJpdmF0ZSBwcmV2aW91c1BhZ2VTaXplOiBudW1iZXIgPSAxMDtcbiAgICBwdWJsaWMgcmVhZG9ubHkgZWxsaXBzaXNJY29uOiBJY29uRGVmaW5pdGlvbiA9IGZhRWxsaXBzaXM7XG4gICAgcHVibGljIHJlYWRvbmx5IGZpcnN0UGFnZUljb246IEljb25EZWZpbml0aW9uID0gZmFBbmdsZURvdWJsZUxlZnQ7XG4gICAgcHVibGljIHJlYWRvbmx5IGxhc3RQYWdlSWNvbjogSWNvbkRlZmluaXRpb24gPSBmYUFuZ2xlRG91YmxlUmlnaHQ7XG4gICAgcHVibGljIHJlYWRvbmx5IG5leHRJY29uOiBJY29uRGVmaW5pdGlvbiA9IGZhQW5nbGVSaWdodDtcbiAgICBwdWJsaWMgcmVhZG9ubHkgcHJldmlvdXNJY29uOiBJY29uRGVmaW5pdGlvbiA9IGZhQW5nbGVMZWZ0O1xuICAgIHB1YmxpYyBpbnB1dFZhbHVlOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBwdWJsaWMgcGFnZUNvdW50OiBudW1iZXIgPSAxMDtcbiAgICBwdWJsaWMgcGFnZTogbnVtYmVyID0gMTtcbiAgICBwdWJsaWMgcGFnZVNpemVWYWx1ZUxpc3Q6IG51bWJlcltdID0gW107XG4gICAgcHVibGljIHBhZ2VzOiBQYWdlW10gPSBbXTtcblxuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIGZpcnN0TGFzdDogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBAT3V0cHV0KClcbiAgICBwdWJsaWMgcGFnZUNoYW5nZTogRXZlbnRFbWl0dGVyPFBhZ2VDaGFuZ2VFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFBhZ2VDaGFuZ2VFdmVudD4oKTtcblxuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIHBhZ2VJbnB1dDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgcGFnZVNpemU6IG51bWJlciA9IDEwO1xuXG4gICAgQE91dHB1dCgpXG4gICAgcHVibGljIHBhZ2VTaXplQ2hhbmdlOiBFdmVudEVtaXR0ZXI8UGFnZVNpemVDaGFuZ2VFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFBhZ2VTaXplQ2hhbmdlRXZlbnQ+KCk7XG5cbiAgICBAVmlld0NoaWxkKFwicGFnZVNpemVEcm9wZG93bkxpc3RcIilcbiAgICBwdWJsaWMgcGFnZVNpemVEcm9wZG93bkxpc3Q/OiBEcm9wRG93bkxpc3RDb21wb25lbnQ7XG5cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBwcmV2aW91c05leHQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgc2V0IHBhZ2VTaXplVmFsdWVzKHZhbHVlczogbnVtYmVyW10gfCBib29sZWFuKSB7XG4gICAgICAgIGlmICh2YWx1ZXMgPT09IGZhbHNlIHx8IChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemVWYWx1ZUxpc3QgPSBbXTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemVWYWx1ZUxpc3QgPSB2YWx1ZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTaXplVmFsdWVMaXN0ID0gWzEwLCAyMCwgNTAsIDEwMF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBza2lwOiBudW1iZXIgPSAwO1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgdG90YWw6IG51bWJlciA9IDA7XG5cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyB0eXBlOiBcIm51bWVyaWNcIiB8IFwiaW5wdXRcIiA9IFwibnVtZXJpY1wiO1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgdmlzaWJsZVBhZ2VzOiBudW1iZXIgPSA1O1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge31cblxuICAgIHB1YmxpYyBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzW1wicGFnZVNpemVcIl0gfHwgY2hhbmdlc1tcInRvdGFsXCJdIHx8IGNoYW5nZXNbXCJ2aXNpYmxlUGFnZXNcIl0gfHwgY2hhbmdlc1tcInNraXBcIl0pIHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VTaXplID0gY2hhbmdlc1tcInBhZ2VTaXplXCJdID8gY2hhbmdlc1tcInBhZ2VTaXplXCJdLmN1cnJlbnRWYWx1ZSA6IHRoaXMucGFnZVNpemU7XG4gICAgICAgICAgICBjb25zdCB0b3RhbCA9IGNoYW5nZXNbXCJ0b3RhbFwiXSA/IGNoYW5nZXNbXCJ0b3RhbFwiXS5jdXJyZW50VmFsdWUgOiB0aGlzLnRvdGFsO1xuICAgICAgICAgICAgY29uc3QgdmlzaWJsZVBhZ2VzID0gY2hhbmdlc1tcInZpc2libGVQYWdlc1wiXSA/IGNoYW5nZXNbXCJ2aXNpYmxlUGFnZXNcIl0uY3VycmVudFZhbHVlIDogdGhpcy52aXNpYmxlUGFnZXM7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb3VudCA9IE1hdGguY2VpbCh0b3RhbCAvIHBhZ2VTaXplKTtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VzW1wic2tpcFwiXSAmJiBjaGFuZ2VzW1wic2tpcFwiXS5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXNbXCJza2lwXCJdLnByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBza2lwID0gY2hhbmdlc1tcInNraXBcIl0uY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IE1hdGguZmxvb3Ioc2tpcCAvIHBhZ2VTaXplKSArIDEgPz8gdGhpcy5wYWdlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9IHRoaXMucGFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFnZUNvdW50ID0gTWF0aC5jZWlsKHRvdGFsIC8gcGFnZVNpemUpO1xuICAgICAgICAgICAgdGhpcy5wcmVwYXJlUGFnZXModGhpcy5wYWdlLCB2aXNpYmxlUGFnZXMsIHRoaXMucGFnZUNvdW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHt9XG5cbiAgICBwdWJsaWMgb25KdW1wTmV4dENsaWNrKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYWdlID0gTWF0aC5taW4odGhpcy5wYWdlICsgdGhpcy52aXNpYmxlUGFnZXMsIHRoaXMucGFnZUNvdW50KTtcbiAgICAgICAgdGhpcy5zZXRQYWdlKHBhZ2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbkp1bXBQcmV2aW91c0NsaWNrKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYWdlID0gTWF0aC5tYXgodGhpcy5wYWdlIC0gdGhpcy52aXNpYmxlUGFnZXMsIDEpO1xuICAgICAgICB0aGlzLnNldFBhZ2UocGFnZSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uTmV4dFBhZ2VDbGljaygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGFnZSA9IE1hdGgubWluKHRoaXMucGFnZSArIDEsIHRoaXMucGFnZUNvdW50KTtcbiAgICAgICAgdGhpcy5zZXRQYWdlKHBhZ2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblBhZ2VDbGljayhwYWdlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKHBhZ2UgPT09IHRoaXMucGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0UGFnZShwYWdlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25QYWdlSW5wdXRCbHVyKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pbnB1dFZhbHVlID09PSBudWxsIHx8IHRoaXMuaW5wdXRWYWx1ZSA9PT0gdGhpcy5wYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0VmFsdWUgPSB0aGlzLnBhZ2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5wdXRWYWx1ZSA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbnB1dFZhbHVlID4gdGhpcy5wYWdlQ291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9IHRoaXMucGFnZUNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0UGFnZSh0aGlzLmlucHV0VmFsdWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblBhZ2VTaXplVmFsdWVDaGFuZ2UodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMucGFnZVNpemUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBQYWdlU2l6ZUNoYW5nZUV2ZW50KHZhbHVlLCB0aGlzLnBhZ2VTaXplKTtcbiAgICAgICAgaWYgKHRoaXMucGFnZVNpemVEcm9wZG93bkxpc3QpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemVEcm9wZG93bkxpc3Quc2V0VmFsdWUodGhpcy5wcmV2aW91c1BhZ2VTaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGFnZVNpemVDaGFuZ2UuZW1pdChldmVudCk7XG4gICAgICAgIGlmIChldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IHRoaXMucHJldmlvdXNQYWdlU2l6ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VTaXplRHJvcGRvd25MaXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZURyb3Bkb3duTGlzdC5zZXRWYWx1ZSh0aGlzLnByZXZpb3VzUGFnZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJldmlvdXNQYWdlU2l6ZSA9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5wYWdlU2l6ZURyb3Bkb3duTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZURyb3Bkb3duTGlzdC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYWdlQ291bnQgPSBNYXRoLmNlaWwodGhpcy50b3RhbCAvIHRoaXMucGFnZVNpemUpO1xuICAgICAgICB0aGlzLnNldFBhZ2UoMSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uUHJldmlvdXNQYWdlQ2xpY2soKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBNYXRoLm1heCh0aGlzLnBhZ2UgLSAxLCAxKTtcbiAgICAgICAgdGhpcy5zZXRQYWdlKHBhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJlcGFyZVBhZ2VzKGN1cnJlbnRQYWdlOiBudW1iZXIsIHZpc2libGVQYWdlczogbnVtYmVyLCBtYXhQYWdlczogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGhhbGYgPSBNYXRoLmZsb29yKHZpc2libGVQYWdlcyAvIDIpO1xuICAgICAgICBsZXQgZmlyc3QgPSAxO1xuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICB0aGlzLnBhZ2VzID0gW107XG4gICAgICAgIGlmIChtYXhQYWdlcyA8PSAxMCkge1xuICAgICAgICAgICAgZm9yIChpbmRleCA9IDE7IGluZGV4IDw9IG1heFBhZ2VzOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlcy5wdXNoKHsgcGFnZTogaW5kZXgsIHRleHQ6IGluZGV4LnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPCB2aXNpYmxlUGFnZXMpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXMucHVzaCh7IHBhZ2U6IGZpcnN0LCB0ZXh0OiBmaXJzdC50b1N0cmluZygpIH0pO1xuICAgICAgICAgICAgZm9yIChpbmRleCA9IDI7IGluZGV4IDwgKG1heFBhZ2VzIDwgdmlzaWJsZVBhZ2VzID8gbWF4UGFnZXMgOiB2aXNpYmxlUGFnZXMpICsgMTsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXMucHVzaCh7IHBhZ2U6IGluZGV4LCB0ZXh0OiBpbmRleC50b1N0cmluZygpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlcy5wdXNoKHsgcGFnZTogbWF4UGFnZXMsIHRleHQ6IG1heFBhZ2VzLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPj0gdmlzaWJsZVBhZ2VzICYmIGN1cnJlbnRQYWdlIDw9IG1heFBhZ2VzIC0gdmlzaWJsZVBhZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VzLnB1c2goeyBwYWdlOiBmaXJzdCwgdGV4dDogZmlyc3QudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIGZvciAoaW5kZXggPSBjdXJyZW50UGFnZSAtIGhhbGY7IGluZGV4IDwgY3VycmVudFBhZ2UgKyB2aXNpYmxlUGFnZXMgLSBoYWxmOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlcy5wdXNoKHsgcGFnZTogaW5kZXgsIHRleHQ6IGluZGV4LnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZ2VzLnB1c2goeyBwYWdlOiBtYXhQYWdlcywgdGV4dDogbWF4UGFnZXMudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UGFnZSA+PSBtYXhQYWdlcyAtIHZpc2libGVQYWdlcykge1xuICAgICAgICAgICAgdGhpcy5wYWdlcy5wdXNoKHsgcGFnZTogZmlyc3QsIHRleHQ6IGZpcnN0LnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICBpbmRleCA9IG1heFBhZ2VzIC0gdmlzaWJsZVBhZ2VzIDwgY3VycmVudFBhZ2UgPyBtYXhQYWdlcyAtIHZpc2libGVQYWdlcyA6IGN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgZm9yICg7IGluZGV4IDw9IG1heFBhZ2VzOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlcy5wdXNoKHsgcGFnZTogaW5kZXgsIHRleHQ6IGluZGV4LnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFBhZ2UocGFnZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogdGhpcy5wYWdlU2l6ZTtcbiAgICAgICAgdGhpcy5wYWdlQ2hhbmdlLmVtaXQoeyBwYWdlLCBza2lwLCB0YWtlOiB0aGlzLnBhZ2VTaXplIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgY3VycmVudFBhZ2VEYXRhQ291bnRFbmQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZVNpemUsIHRoaXMudG90YWwpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgY3VycmVudFBhZ2VEYXRhQ291bnRTdGFydCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKHRoaXMucGFnZSAtIDEpICogdGhpcy5wYWdlU2l6ZSArIDE7XG4gICAgfVxufVxuIiwiPGRpdiBjbGFzcz1cIm1vbmEtcGFnZXJcIj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwidHlwZT09PSdudW1lcmljJ1wiPlxuICAgICAgICA8b2wgY2xhc3M9XCJtb25hLXBhZ2VyLWxpc3RcIj5cbiAgICAgICAgICAgIDxsaSAqbmdJZj1cImZpcnN0TGFzdFwiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gbW9uYUJ1dHRvbiBbZmxhdF09XCJ0cnVlXCIgKGNsaWNrKT1cIm9uUGFnZUNsaWNrKDEpXCIgW2Rpc2FibGVkXT1cInBhZ2U9PT0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxmYS1pY29uIFtpY29uXT1cImZpcnN0UGFnZUljb25cIj48L2ZhLWljb24+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgPGxpICpuZ0lmPVwicHJldmlvdXNOZXh0XCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBtb25hQnV0dG9uIFtmbGF0XT1cInRydWVcIiBbZGlzYWJsZWRdPVwicGFnZTw9MVwiIChjbGljayk9XCJvblByZXZpb3VzUGFnZUNsaWNrKClcIj5cbiAgICAgICAgICAgICAgICAgICAgPGZhLWljb24gW2ljb25dPVwicHJldmlvdXNJY29uXCI+PC9mYS1pY29uPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaSAqbmdJZj1cInBhZ2VzLmxlbmd0aCAhPT0gMFwiIFtuZ0NsYXNzXT1cInsnbW9uYS1wYWdlci1hY3RpdmUnOiBwYWdlPT09MX1cIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG1vbmFCdXR0b24gW2ZsYXRdPVwidHJ1ZVwiIChjbGljayk9XCJvblBhZ2VDbGljaygxKVwiPjE8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bGkgKm5nSWY9XCJwYWdlcy5sZW5ndGggPiB2aXNpYmxlUGFnZXMgJiYgcGFnZXNbMV0ucGFnZSAtIDEgPiAxXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBtb25hQnV0dG9uIFtmbGF0XT1cInRydWVcIiAoY2xpY2spPVwib25KdW1wUHJldmlvdXNDbGljaygpXCI+XG4gICAgICAgICAgICAgICAgICAgIDxmYS1pY29uIFtpY29uXT1cImVsbGlwc2lzSWNvblwiPjwvZmEtaWNvbj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBwYWdlSXRlbSBvZiBwYWdlc3xtb25hU2xpY2U6MTpwYWdlcy5sZW5ndGgtMTsgbGV0IHB4ID0gaW5kZXg7XCI+XG4gICAgICAgICAgICAgICAgPGxpIFthdHRyLmRhdGEtcGFnZV09XCJwYWdlSXRlbS5wYWdlXCIgW25nQ2xhc3NdPVwieydtb25hLXBhZ2VyLWFjdGl2ZSc6IHBhZ2U9PT1wYWdlSXRlbS5wYWdlfVwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG1vbmFCdXR0b24gW2ZsYXRdPVwidHJ1ZVwiIChjbGljayk9XCJvblBhZ2VDbGljayhwYWdlSXRlbS5wYWdlKVwiPnt7cGFnZUl0ZW0udGV4dH19PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgPGxpICpuZ0lmPVwicGFnZXMubGVuZ3RoID4gdmlzaWJsZVBhZ2VzICYmIHBhZ2VzW3BhZ2VzLmxlbmd0aC0xXS5wYWdlIC0gcGFnZXNbcGFnZXMubGVuZ3RoLTJdLnBhZ2UgPiAxXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBtb25hQnV0dG9uIFtmbGF0XT1cInRydWVcIiAoY2xpY2spPVwib25KdW1wTmV4dENsaWNrKClcIj5cbiAgICAgICAgICAgICAgICAgICAgPGZhLWljb24gW2ljb25dPVwiZWxsaXBzaXNJY29uXCI+PC9mYS1pY29uPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaSAqbmdJZj1cInBhZ2VzLmxlbmd0aCA+IDFcIiBbbmdDbGFzc109XCJ7J21vbmEtcGFnZXItYWN0aXZlJzogcGFnZT09PXBhZ2VDb3VudH1cIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG1vbmFCdXR0b24gW2ZsYXRdPVwidHJ1ZVwiIChjbGljayk9XCJvblBhZ2VDbGljayhwYWdlQ291bnQpXCI+e3twYWdlQ291bnR9fTwvYnV0dG9uPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaSAqbmdJZj1cInByZXZpb3VzTmV4dFwiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gbW9uYUJ1dHRvbiBbZmxhdF09XCJ0cnVlXCIgW2Rpc2FibGVkXT1cInBhZ2UgPCAxIHx8IHBhZ2UgPT09IHBhZ2VDb3VudFwiIChjbGljayk9XCJvbk5leHRQYWdlQ2xpY2soKVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZmEtaWNvbiBbaWNvbl09XCJuZXh0SWNvblwiPjwvZmEtaWNvbj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bGkgKm5nSWY9XCJmaXJzdExhc3RcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG1vbmFCdXR0b24gW2ZsYXRdPVwidHJ1ZVwiIChjbGljayk9XCJvblBhZ2VDbGljayhwYWdlQ291bnQpXCIgW2Rpc2FibGVkXT1cInBhZ2U9PT1wYWdlQ291bnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGZhLWljb24gW2ljb25dPVwibGFzdFBhZ2VJY29uXCI+PC9mYS1pY29uPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICA8bW9uYS1udW1lcmljLXRleHQtYm94IFtzcGlubmVyc109XCJmYWxzZVwiIFttaW5dPVwiMVwiIFttYXhdPVwicGFnZUNvdW50XCIgWyh2YWx1ZSldPVwiaW5wdXRWYWx1ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5wdXRCbHVyKT1cIm9uUGFnZUlucHV0Qmx1cigpXCIgKm5nSWY9XCJwYWdlSW5wdXRcIj48L21vbmEtbnVtZXJpYy10ZXh0LWJveD5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bGkgKm5nSWY9XCJwYWdlU2l6ZVZhbHVlTGlzdC5sZW5ndGggIT09IDBcIj5cbiAgICAgICAgICAgICAgICA8bW9uYS1kcm9wLWRvd24tbGlzdCBbZGF0YV09XCJwYWdlU2l6ZVZhbHVlTGlzdFwiIFt2YWx1ZV09XCJwYWdlU2l6ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZhbHVlQ2hhbmdlKT1cIm9uUGFnZVNpemVWYWx1ZUNoYW5nZSgkZXZlbnQpXCIgI3BhZ2VTaXplRHJvcGRvd25MaXN0PjwvbW9uYS1kcm9wLWRvd24tbGlzdD5cbiAgICAgICAgICAgICAgICA8c3Bhbj5pdGVtcyBwZXIgcGFnZTwvc3Bhbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvb2w+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb25hLXBhZ2VyLWluZm9cIj5cbiAgICAgICAgICAgIDxzcGFuPnt7Y3VycmVudFBhZ2VEYXRhQ291bnRTdGFydH19IC0ge3tjdXJyZW50UGFnZURhdGFDb3VudEVuZH19IG9mIHt7dG90YWx9fSBpdGVtczwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInR5cGU9PT0naW5wdXQnXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb25hLXBhZ2VyLWlucHV0XCI+XG4gICAgICAgICAgICA8b2wgY2xhc3M9XCJtb25hLXBhZ2VyLWxpc3RcIj5cbiAgICAgICAgICAgICAgICA8bGkgKm5nSWY9XCJmaXJzdExhc3RcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBtb25hQnV0dG9uIFtmbGF0XT1cInRydWVcIiAoY2xpY2spPVwib25QYWdlQ2xpY2soMSlcIiBbZGlzYWJsZWRdPVwicGFnZT09PTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1pY29uIFtpY29uXT1cImZpcnN0UGFnZUljb25cIj48L2ZhLWljb24+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgPGxpICpuZ0lmPVwicHJldmlvdXNOZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gbW9uYUJ1dHRvbiBbZmxhdF09XCJ0cnVlXCIgW2Rpc2FibGVkXT1cInBhZ2U8PTFcIiAoY2xpY2spPVwib25QcmV2aW91c1BhZ2VDbGljaygpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZmEtaWNvbiBbaWNvbl09XCJwcmV2aW91c0ljb25cIj48L2ZhLWljb24+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb25hLXBhZ2VyLWlucHV0LXRleHRcIj5QYWdlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgIDxtb25hLW51bWVyaWMtdGV4dC1ib3ggW3NwaW5uZXJzXT1cImZhbHNlXCIgW21pbl09XCIxXCIgW21heF09XCJwYWdlQ291bnRcIiBbKHZhbHVlKV09XCJpbnB1dFZhbHVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbnB1dEJsdXIpPVwib25QYWdlSW5wdXRCbHVyKClcIj48L21vbmEtbnVtZXJpYy10ZXh0LWJveD5cbiAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1vbmEtcGFnZXItaW5wdXQtdGV4dFwiPm9mPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibW9uYS1wYWdlci1pbnB1dC10ZXh0XCI+e3twYWdlQ291bnR9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgPGxpICpuZ0lmPVwicHJldmlvdXNOZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gbW9uYUJ1dHRvbiBbZmxhdF09XCJ0cnVlXCIgW2Rpc2FibGVkXT1cInBhZ2UgPCAxIHx8IHBhZ2UgPT09IHBhZ2VDb3VudFwiIChjbGljayk9XCJvbk5leHRQYWdlQ2xpY2soKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGZhLWljb24gW2ljb25dPVwibmV4dEljb25cIj48L2ZhLWljb24+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgPGxpICpuZ0lmPVwiZmlyc3RMYXN0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gbW9uYUJ1dHRvbiBbZmxhdF09XCJ0cnVlXCIgKGNsaWNrKT1cIm9uUGFnZUNsaWNrKHBhZ2VDb3VudClcIiBbZGlzYWJsZWRdPVwicGFnZT09PXBhZ2VDb3VudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGZhLWljb24gW2ljb25dPVwibGFzdFBhZ2VJY29uXCI+PC9mYS1pY29uPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgPC9vbD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb25hLXBhZ2VyLWluZm9cIj5cbiAgICAgICAgICAgIDxzcGFuPnt7KHBhZ2UtMSkqcGFnZVNpemUrMX19IC0ge3twYWdlKnBhZ2VTaXplID4gdG90YWwgPyB0b3RhbCA6IHBhZ2UqcGFnZVNpemV9fSBvZiB7e3RvdGFsfX0gaXRlbXM8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuPC9kaXY+XG4iXX0=