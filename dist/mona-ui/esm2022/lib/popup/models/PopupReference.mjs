import { Subject } from "rxjs";
import { PopupCloseEvent, PopupCloseSource } from "./PopupCloseEvent";
import { PopupRef } from "./PopupRef";
/**
 * @internal - used by the popup service. Do not use directly or export.
 */
export class PopupReference {
    constructor(overlayReference) {
        this.overlayReference = overlayReference;
        this.closed$ = new Subject();
    }
    close(result) {
        const event = result instanceof PopupCloseEvent
            ? result
            : new PopupCloseEvent({ result, via: PopupCloseSource.Programmatic });
        this.overlayRef.dispose();
        this.closed$.next(event);
        this.closed$.complete();
    }
    get closed() {
        return this.closed$.asObservable();
    }
    get component() {
        return this.componentRef ?? null;
    }
    get overlayRef() {
        return this.overlayReference;
    }
    get popupRef() {
        return new PopupRef(this);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUG9wdXBSZWZlcmVuY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9tb25hLXVpL3NyYy9saWIvcG9wdXAvbW9kZWxzL1BvcHVwUmVmZXJlbmNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBYyxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDM0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBR3RFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFHdEM7O0dBRUc7QUFDSCxNQUFNLE9BQU8sY0FBYztJQUl2QixZQUFtQyxnQkFBNEI7UUFBNUIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFZO1FBSC9DLFlBQU8sR0FBNkIsSUFBSSxPQUFPLEVBQW1CLENBQUM7SUFHakIsQ0FBQztJQUU1RCxLQUFLLENBQUksTUFBVTtRQUN0QixNQUFNLEtBQUssR0FDUCxNQUFNLFlBQVksZUFBZTtZQUM3QixDQUFDLENBQUMsTUFBTTtZQUNSLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQztRQUM5RSxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzFCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQVcsTUFBTTtRQUNiLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBRUQsSUFBVyxTQUFTO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUM7SUFDckMsQ0FBQztJQUVELElBQVcsVUFBVTtRQUNqQixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUNqQyxDQUFDO0lBRUQsSUFBVyxRQUFRO1FBQ2YsT0FBTyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM5QixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IFBvcHVwQ2xvc2VFdmVudCwgUG9wdXBDbG9zZVNvdXJjZSB9IGZyb20gXCIuL1BvcHVwQ2xvc2VFdmVudFwiO1xuaW1wb3J0IHsgQ29tcG9uZW50UmVmIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE92ZXJsYXlSZWYgfSBmcm9tIFwiQGFuZ3VsYXIvY2RrL292ZXJsYXlcIjtcbmltcG9ydCB7IFBvcHVwUmVmIH0gZnJvbSBcIi4vUG9wdXBSZWZcIjtcbmltcG9ydCB7IFBvcHVwUmVmUGFyYW1zIH0gZnJvbSBcIi4vUG9wdXBSZWZQYXJhbXNcIjtcblxuLyoqXG4gKiBAaW50ZXJuYWwgLSB1c2VkIGJ5IHRoZSBwb3B1cCBzZXJ2aWNlLiBEbyBub3QgdXNlIGRpcmVjdGx5IG9yIGV4cG9ydC5cbiAqL1xuZXhwb3J0IGNsYXNzIFBvcHVwUmVmZXJlbmNlIGltcGxlbWVudHMgUG9wdXBSZWZQYXJhbXMge1xuICAgIHB1YmxpYyByZWFkb25seSBjbG9zZWQkOiBTdWJqZWN0PFBvcHVwQ2xvc2VFdmVudD4gPSBuZXcgU3ViamVjdDxQb3B1cENsb3NlRXZlbnQ+KCk7XG4gICAgcHVibGljIGNvbXBvbmVudFJlZj86IENvbXBvbmVudFJlZjxhbnk+O1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBvdmVybGF5UmVmZXJlbmNlOiBPdmVybGF5UmVmKSB7fVxuXG4gICAgcHVibGljIGNsb3NlPFI+KHJlc3VsdD86IFIpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPVxuICAgICAgICAgICAgcmVzdWx0IGluc3RhbmNlb2YgUG9wdXBDbG9zZUV2ZW50XG4gICAgICAgICAgICAgICAgPyByZXN1bHRcbiAgICAgICAgICAgICAgICA6IG5ldyBQb3B1cENsb3NlRXZlbnQoeyByZXN1bHQsIHZpYTogUG9wdXBDbG9zZVNvdXJjZS5Qcm9ncmFtbWF0aWMgfSk7XG4gICAgICAgIHRoaXMub3ZlcmxheVJlZi5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuY2xvc2VkJC5uZXh0KGV2ZW50KTtcbiAgICAgICAgdGhpcy5jbG9zZWQkLmNvbXBsZXRlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBjbG9zZWQoKTogT2JzZXJ2YWJsZTxQb3B1cENsb3NlRXZlbnQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2VkJC5hc09ic2VydmFibGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGNvbXBvbmVudCgpOiBDb21wb25lbnRSZWY8YW55PiB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRSZWYgPz8gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IG92ZXJsYXlSZWYoKTogT3ZlcmxheVJlZiB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlSZWZlcmVuY2U7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBwb3B1cFJlZigpOiBQb3B1cFJlZiB7XG4gICAgICAgIHJldHVybiBuZXcgUG9wdXBSZWYodGhpcyk7XG4gICAgfVxufVxuIl19