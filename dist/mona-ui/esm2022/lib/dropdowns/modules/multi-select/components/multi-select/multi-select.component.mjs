import { ChangeDetectionStrategy, Component, ContentChild, EventEmitter, Input, Output, TemplateRef } from "@angular/core";
import { AbstractDropDownListComponent } from "../../../../components/abstract-drop-down-list/abstract-drop-down-list.component";
import { PopupListService } from "../../../../services/popup-list.service";
import { MultiSelectTagTemplateDirective } from "../../directives/multi-select-tag-template.directive";
import { MultiSelectItemTemplateDirective } from "../../directives/multi-select-item-template.directive";
import { MultiSelectGroupTemplateDirective } from "../../directives/multi-select-group-template.directive";
import * as i0 from "@angular/core";
import * as i1 from "../../../../services/popup-list.service";
import * as i2 from "../../../../../popup/services/popup.service";
import * as i3 from "@angular/common";
import * as i4 from "../../../../../buttons/modules/chip/components/chip/chip.component";
import * as i5 from "@fortawesome/angular-fontawesome";
import * as i6 from "../../../../components/popup-list/popup-list.component";
import * as i7 from "../../../../directives/list-item-template.directive";
import * as i8 from "../../../../directives/list-group-template.directive";
export class MultiSelectComponent extends AbstractDropDownListComponent {
    constructor(elementRef, popupListService, popupService, cdr) {
        super(elementRef, popupListService, popupService);
        this.elementRef = elementRef;
        this.popupListService = popupListService;
        this.popupService = popupService;
        this.cdr = cdr;
        this.resizeObserver = null;
        this.selectionMode = "multiple";
        this.popupListValues = [];
        this.summaryTagTemplate = null;
        this.tagCount = -1;
        this.valuePopupListItem = [];
        this.filterable = false;
        this.tagTemplate = null;
        this.value = [];
        this.valueChange = new EventEmitter();
    }
    ngOnChanges(changes) {
        super.ngOnChanges(changes);
        if (changes["value"]) {
            this.popupListValues = this.value;
            this.valuePopupListItem = this.popupListService.viewListData
                .selectMany(g => g.source)
                .where(d => this.value.some(v => d.dataEquals(v)))
                .toArray();
        }
    }
    ngOnDestroy() {
        super.ngOnDestroy();
        this.resizeObserver?.disconnect();
    }
    ngOnInit() {
        super.ngOnInit();
        this.setEventListeners();
    }
    onPopupListValueChange(event) {
        if (this.value && this.containsValue(event.value, this.value)) {
            if (event.via === "selection") {
                this.close();
            }
            return;
        }
        if (event.via === "selection" && this.selectionMode === "single") {
            this.close();
        }
        this.updateValue(event.value);
        this.popupListValues = event.value;
    }
    onSelectedItemRemove(event, popupListItem) {
        event.stopImmediatePropagation();
        const remainingItems = this.valuePopupListItem.filter(item => !item.dataEquals(popupListItem.data)) ?? [];
        this.updateValue(remainingItems);
    }
    onSelectedItemGroupRemove(event) {
        event.stopImmediatePropagation();
        const remainingItems = this.valuePopupListItem.slice(0, this.visibleTagCount);
        this.updateValue(remainingItems);
    }
    containsValue(popupListItems, value) {
        return popupListItems.some(popupListItem => popupListItem.dataEquals(value));
    }
    setEventListeners() {
        this.resizeObserver = new ResizeObserver(() => {
            window.setTimeout(() => {
                this.popupRef?.overlayRef.updatePosition();
                this.popupRef?.overlayRef.updateSize({ width: this.elementRef.nativeElement.clientWidth });
            });
        });
        this.resizeObserver.observe(this.elementRef.nativeElement);
    }
    get summaryTagText() {
        return this.tagCount < 0
            ? ""
            : this.tagCount === 0
                ? `${this.valuePopupListItem.length} item${this.valuePopupListItem.length === 1 ? "" : "s"}`
                : `+${this.valuePopupListItem.length - this.tagCount} item${this.valuePopupListItem.length - this.tagCount > 1 ? "s" : ""}`;
    }
    get visibleTagCount() {
        return this.tagCount < 0 ? this.valuePopupListItem.length : this.tagCount === 0 ? 0 : this.tagCount;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.0", ngImport: i0, type: MultiSelectComponent, deps: [{ token: i0.ElementRef }, { token: i1.PopupListService }, { token: i2.PopupService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.0.0", type: MultiSelectComponent, selector: "mona-multi-select", inputs: { filterable: "filterable", value: "value" }, outputs: { valueChange: "valueChange" }, providers: [PopupListService], queries: [{ propertyName: "groupTemplate", first: true, predicate: MultiSelectGroupTemplateDirective, descendants: true, read: TemplateRef }, { propertyName: "itemTemplate", first: true, predicate: MultiSelectItemTemplateDirective, descendants: true, read: TemplateRef }, { propertyName: "tagTemplate", first: true, predicate: MultiSelectTagTemplateDirective, descendants: true, read: TemplateRef }], usesInheritance: true, usesOnChanges: true, ngImport: i0, template: "<div class=\"mona-dropdown mona-multi-select mona-input-selector\" [attr.tabindex]=\"disabled ? -1 : 0\"\n     [ngClass]=\"{'mona-disabled': disabled}\"  (click)=\"open()\"\n     #dropdownWrapper>\n    <div class=\"mona-input-selector-value\">\n        <div>\n            <mona-chip *ngFor=\"let item of valuePopupListItem | slice:0:visibleTagCount\"\n                       [tabindex]=\"-1\" [removable]=\"true\" (remove)=\"onSelectedItemRemove($event, item)\">\n                <span *ngIf=\"!tagTemplate\">{{item.text}}</span>\n                <ng-container [ngTemplateOutlet]=\"tagTemplate\" [ngTemplateOutletContext]=\"{$implicit: item.data}\" *ngIf=\"tagTemplate\"></ng-container>\n            </mona-chip>\n            <mona-chip [tabindex]=\"-1\" [removable]=\"true\" (remove)=\"onSelectedItemGroupRemove($event)\"\n                       *ngIf=\"tagCount >= 0 && valuePopupListItem.length > tagCount\">\n                <span *ngIf=\"!summaryTagTemplate\">{{summaryTagText}}</span>\n                <ng-container [ngTemplateOutlet]=\"summaryTagTemplate\" [ngTemplateOutletContext]=\"{$implicit: valuePopupListItem}\"\n                              *ngIf=\"summaryTagTemplate\"></ng-container>\n            </mona-chip>\n        </div>\n    </div>\n    <div class=\"mona-input-selector-icon\">\n        <fa-icon [icon]=\"dropdownIcon\"></fa-icon>\n    </div>\n</div>\n\n<ng-template #popupTemplate>\n    <div *ngIf=\"!!popupRef\">\n        <mona-popup-list [textField]=\"textField\" [valueField]=\"valueField\" [groupField]=\"groupField\" [filterable]=\"filterable\"\n                         [value]=\"popupListValues\" selectionMode=\"multiple\" (valueChange)=\"onPopupListValueChange($event)\">\n            <ng-container *ngIf=\"itemTemplate\">\n                <ng-template monaListItemTemplate let-dataItem let-listItem=\"listItem\">\n                    <ng-container [ngTemplateOutlet]=\"itemTemplate ?? null\"\n                                  [ngTemplateOutletContext]=\"{$implicit: dataItem, listItem}\"></ng-container>\n                </ng-template>\n            </ng-container>\n            <ng-container *ngIf=\"groupTemplate\">\n                <ng-template monaListGroupTemplate let-dataItem let-listItem=\"listItem\">\n                    <ng-container [ngTemplateOutlet]=\"groupTemplate ?? null\"\n                                  [ngTemplateOutletContext]=\"{$implicit: dataItem, listItem}\"></ng-container>\n                </ng-template>\n            </ng-container>\n        </mona-popup-list>\n    </div>\n</ng-template>\n", styles: ["div.mona-input-selector{height:auto;min-height:var(--mona-input-height)}div.mona-input-selector:hover,div.mona-input-selector:active{background-color:var(--mona-background)}div.mona-input-selector-value{padding:0 1px 1px}div.mona-input-selector-value>div:first-child{display:flex;flex-direction:row;flex-wrap:wrap;width:100%;height:100%}div.mona-input-selector-value mona-text-box{flex:1}div.mona-input-selector-value mona-chip:not(:last-child){margin:0 1px 0 0}div.mona-input-selector-icon{min-width:var(--mona-input-height);border-left:1px solid var(--mona-border-color)}\n"], dependencies: [{ kind: "directive", type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i3.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: i4.ChipComponent, selector: "mona-chip", inputs: ["disabled", "label", "removable", "tabindex"], outputs: ["remove"] }, { kind: "component", type: i5.FaIconComponent, selector: "fa-icon", inputs: ["icon", "title", "spin", "pulse", "mask", "styles", "flip", "size", "pull", "border", "inverse", "symbol", "rotate", "fixedWidth", "classes", "transform", "a11yRole"] }, { kind: "component", type: i6.PopupListComponent, selector: "mona-popup-list", inputs: ["filterable", "groupField", "highlightedValues", "navigable", "selectionMode", "textField", "value", "valueField"], outputs: ["valueChange"] }, { kind: "directive", type: i7.ListItemTemplateDirective, selector: "ng-template[monaListItemTemplate]" }, { kind: "directive", type: i8.ListGroupTemplateDirective, selector: "ng-template[monaListGroupTemplate]" }, { kind: "pipe", type: i3.SlicePipe, name: "slice" }], changeDetection: i0.ChangeDetectionStrategy.Default }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.0", ngImport: i0, type: MultiSelectComponent, decorators: [{
            type: Component,
            args: [{ selector: "mona-multi-select", providers: [PopupListService], changeDetection: ChangeDetectionStrategy.Default, template: "<div class=\"mona-dropdown mona-multi-select mona-input-selector\" [attr.tabindex]=\"disabled ? -1 : 0\"\n     [ngClass]=\"{'mona-disabled': disabled}\"  (click)=\"open()\"\n     #dropdownWrapper>\n    <div class=\"mona-input-selector-value\">\n        <div>\n            <mona-chip *ngFor=\"let item of valuePopupListItem | slice:0:visibleTagCount\"\n                       [tabindex]=\"-1\" [removable]=\"true\" (remove)=\"onSelectedItemRemove($event, item)\">\n                <span *ngIf=\"!tagTemplate\">{{item.text}}</span>\n                <ng-container [ngTemplateOutlet]=\"tagTemplate\" [ngTemplateOutletContext]=\"{$implicit: item.data}\" *ngIf=\"tagTemplate\"></ng-container>\n            </mona-chip>\n            <mona-chip [tabindex]=\"-1\" [removable]=\"true\" (remove)=\"onSelectedItemGroupRemove($event)\"\n                       *ngIf=\"tagCount >= 0 && valuePopupListItem.length > tagCount\">\n                <span *ngIf=\"!summaryTagTemplate\">{{summaryTagText}}</span>\n                <ng-container [ngTemplateOutlet]=\"summaryTagTemplate\" [ngTemplateOutletContext]=\"{$implicit: valuePopupListItem}\"\n                              *ngIf=\"summaryTagTemplate\"></ng-container>\n            </mona-chip>\n        </div>\n    </div>\n    <div class=\"mona-input-selector-icon\">\n        <fa-icon [icon]=\"dropdownIcon\"></fa-icon>\n    </div>\n</div>\n\n<ng-template #popupTemplate>\n    <div *ngIf=\"!!popupRef\">\n        <mona-popup-list [textField]=\"textField\" [valueField]=\"valueField\" [groupField]=\"groupField\" [filterable]=\"filterable\"\n                         [value]=\"popupListValues\" selectionMode=\"multiple\" (valueChange)=\"onPopupListValueChange($event)\">\n            <ng-container *ngIf=\"itemTemplate\">\n                <ng-template monaListItemTemplate let-dataItem let-listItem=\"listItem\">\n                    <ng-container [ngTemplateOutlet]=\"itemTemplate ?? null\"\n                                  [ngTemplateOutletContext]=\"{$implicit: dataItem, listItem}\"></ng-container>\n                </ng-template>\n            </ng-container>\n            <ng-container *ngIf=\"groupTemplate\">\n                <ng-template monaListGroupTemplate let-dataItem let-listItem=\"listItem\">\n                    <ng-container [ngTemplateOutlet]=\"groupTemplate ?? null\"\n                                  [ngTemplateOutletContext]=\"{$implicit: dataItem, listItem}\"></ng-container>\n                </ng-template>\n            </ng-container>\n        </mona-popup-list>\n    </div>\n</ng-template>\n", styles: ["div.mona-input-selector{height:auto;min-height:var(--mona-input-height)}div.mona-input-selector:hover,div.mona-input-selector:active{background-color:var(--mona-background)}div.mona-input-selector-value{padding:0 1px 1px}div.mona-input-selector-value>div:first-child{display:flex;flex-direction:row;flex-wrap:wrap;width:100%;height:100%}div.mona-input-selector-value mona-text-box{flex:1}div.mona-input-selector-value mona-chip:not(:last-child){margin:0 1px 0 0}div.mona-input-selector-icon{min-width:var(--mona-input-height);border-left:1px solid var(--mona-border-color)}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i1.PopupListService }, { type: i2.PopupService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { filterable: [{
                type: Input
            }], groupTemplate: [{
                type: ContentChild,
                args: [MultiSelectGroupTemplateDirective, { read: TemplateRef }]
            }], itemTemplate: [{
                type: ContentChild,
                args: [MultiSelectItemTemplateDirective, { read: TemplateRef }]
            }], tagTemplate: [{
                type: ContentChild,
                args: [MultiSelectTagTemplateDirective, { read: TemplateRef }]
            }], value: [{
                type: Input
            }], valueChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGktc2VsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21vbmEtdWkvc3JjL2xpYi9kcm9wZG93bnMvbW9kdWxlcy9tdWx0aS1zZWxlY3QvY29tcG9uZW50cy9tdWx0aS1zZWxlY3QvbXVsdGktc2VsZWN0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21vbmEtdWkvc3JjL2xpYi9kcm9wZG93bnMvbW9kdWxlcy9tdWx0aS1zZWxlY3QvY29tcG9uZW50cy9tdWx0aS1zZWxlY3QvbXVsdGktc2VsZWN0LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDSCx1QkFBdUIsRUFFdkIsU0FBUyxFQUNULFlBQVksRUFFWixZQUFZLEVBQ1osS0FBSyxFQUdMLE1BQU0sRUFFTixXQUFXLEVBQ2QsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sa0ZBQWtGLENBQUM7QUFDakksT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFLM0UsT0FBTyxFQUFFLCtCQUErQixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDdkcsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sdURBQXVELENBQUM7QUFDekcsT0FBTyxFQUFFLGlDQUFpQyxFQUFFLE1BQU0sd0RBQXdELENBQUM7Ozs7Ozs7Ozs7QUFTM0csTUFBTSxPQUFPLG9CQUFxQixTQUFRLDZCQUE2QjtJQTBCbkUsWUFDZ0MsVUFBbUMsRUFDbkMsZ0JBQWtDLEVBQ2xDLFlBQTBCLEVBQ3JDLEdBQXNCO1FBRXZDLEtBQUssQ0FBQyxVQUFVLEVBQUUsZ0JBQWdCLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFMdEIsZUFBVSxHQUFWLFVBQVUsQ0FBeUI7UUFDbkMscUJBQWdCLEdBQWhCLGdC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LENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQy9ELEVBQUUsQ0FBQztJQUNiLENBQUM7SUFFRCxJQUFXLGVBQWU7UUFDdEIsT0FBTyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN4RyxDQUFDOzhHQTVHUSxvQkFBb0I7a0dBQXBCLG9CQUFvQiwySUFIbEIsQ0FBQyxnQkFBZ0IsQ0FBQyxxRUFjZixpQ0FBaUMsMkJBQVUsV0FBVyw0REFHdEQsZ0NBQWdDLDJCQUFVLFdBQVcsMkRBR3JELCtCQUErQiwyQkFBVSxXQUFXLHlFQ2hEdEUsOC9FQTBDQTs7MkZEWGEsb0JBQW9CO2tCQVBoQyxTQUFTOytCQUNJLG1CQUFtQixhQUdsQixDQUFDLGdCQUFnQixDQUFDLG1CQUNaLHVCQUF1QixDQUFDLE9BQU87MkxBV3pDLFVBQVU7c0JBRGhCLEtBQUs7Z0JBSUMsYUFBYTtzQkFEbkIsWUFBWTt1QkFBQyxpQ0FBaUMsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7Z0JBSS9ELFlBQVk7c0JBRGxCLFlBQVk7dUJBQUMsZ0NBQWdDLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO2dCQUk5RCxXQUFXO3NCQURqQixZQUFZO3VCQUFDLCtCQUErQixFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtnQkFJcEQsS0FBSztzQkFEcEIsS0FBSztnQkFJVSxXQUFXO3NCQUQxQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBDb21wb25lbnQsXG4gICAgQ29udGVudENoaWxkLFxuICAgIEVsZW1lbnRSZWYsXG4gICAgRXZlbnRFbWl0dGVyLFxuICAgIElucHV0LFxuICAgIE9uRGVzdHJveSxcbiAgICBPbkluaXQsXG4gICAgT3V0cHV0LFxuICAgIFNpbXBsZUNoYW5nZXMsXG4gICAgVGVtcGxhdGVSZWZcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IEFic3RyYWN0RHJvcERvd25MaXN0Q29tcG9uZW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvYWJzdHJhY3QtZHJvcC1kb3duLWxpc3QvYWJzdHJhY3QtZHJvcC1kb3duLWxpc3QuY29tcG9uZW50XCI7XG5pbXBvcnQgeyBQb3B1cExpc3RTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NlcnZpY2VzL3BvcHVwLWxpc3Quc2VydmljZVwiO1xuaW1wb3J0IHsgUG9wdXBTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3BvcHVwL3NlcnZpY2VzL3BvcHVwLnNlcnZpY2VcIjtcbmltcG9ydCB7IFNlbGVjdGlvbk1vZGUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vbW9kZWxzL1NlbGVjdGlvbk1vZGVcIjtcbmltcG9ydCB7IFBvcHVwTGlzdEl0ZW0gfSBmcm9tIFwiLi4vLi4vLi4vLi4vZGF0YS9Qb3B1cExpc3RJdGVtXCI7XG5pbXBvcnQgeyBQb3B1cExpc3RWYWx1ZUNoYW5nZUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2RhdGEvUG9wdXBMaXN0VmFsdWVDaGFuZ2VFdmVudFwiO1xuaW1wb3J0IHsgTXVsdGlTZWxlY3RUYWdUZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gXCIuLi8uLi9kaXJlY3RpdmVzL211bHRpLXNlbGVjdC10YWctdGVtcGxhdGUuZGlyZWN0aXZlXCI7XG5pbXBvcnQgeyBNdWx0aVNlbGVjdEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gXCIuLi8uLi9kaXJlY3RpdmVzL211bHRpLXNlbGVjdC1pdGVtLXRlbXBsYXRlLmRpcmVjdGl2ZVwiO1xuaW1wb3J0IHsgTXVsdGlTZWxlY3RHcm91cFRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSBcIi4uLy4uL2RpcmVjdGl2ZXMvbXVsdGktc2VsZWN0LWdyb3VwLXRlbXBsYXRlLmRpcmVjdGl2ZVwiO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogXCJtb25hLW11bHRpLXNlbGVjdFwiLFxuICAgIHRlbXBsYXRlVXJsOiBcIi4vbXVsdGktc2VsZWN0LmNvbXBvbmVudC5odG1sXCIsXG4gICAgc3R5bGVVcmxzOiBbXCIuL211bHRpLXNlbGVjdC5jb21wb25lbnQuc2Nzc1wiXSxcbiAgICBwcm92aWRlcnM6IFtQb3B1cExpc3RTZXJ2aWNlXSxcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LkRlZmF1bHRcbn0pXG5leHBvcnQgY2xhc3MgTXVsdGlTZWxlY3RDb21wb25lbnQgZXh0ZW5kcyBBYnN0cmFjdERyb3BEb3duTGlzdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgICBwcml2YXRlIHJlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xuICAgIHByb3RlY3RlZCBzZWxlY3Rpb25Nb2RlOiBTZWxlY3Rpb25Nb2RlID0gXCJtdWx0aXBsZVwiO1xuICAgIHB1YmxpYyBwb3B1cExpc3RWYWx1ZXM6IGFueVtdID0gW107XG4gICAgcHVibGljIHN1bW1hcnlUYWdUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PiB8IG51bGwgPSBudWxsO1xuICAgIHB1YmxpYyB0YWdDb3VudDogbnVtYmVyID0gLTE7XG4gICAgcHVibGljIG92ZXJyaWRlIHZhbHVlUG9wdXBMaXN0SXRlbTogUG9wdXBMaXN0SXRlbVtdID0gW107XG5cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBmaWx0ZXJhYmxlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBAQ29udGVudENoaWxkKE11bHRpU2VsZWN0R3JvdXBUZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KVxuICAgIHB1YmxpYyBncm91cFRlbXBsYXRlPzogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIEBDb250ZW50Q2hpbGQoTXVsdGlTZWxlY3RJdGVtVGVtcGxhdGVEaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSlcbiAgICBwdWJsaWMgaXRlbVRlbXBsYXRlPzogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIEBDb250ZW50Q2hpbGQoTXVsdGlTZWxlY3RUYWdUZW1wbGF0ZURpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KVxuICAgIHB1YmxpYyB0YWdUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PiB8IG51bGwgPSBudWxsO1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgb3ZlcnJpZGUgdmFsdWU6IGFueVtdID0gW107XG5cbiAgICBAT3V0cHV0KClcbiAgICBwdWJsaWMgb3ZlcnJpZGUgdmFsdWVDaGFuZ2U6IEV2ZW50RW1pdHRlcjxhbnlbXT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueVtdPigpO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgcmVhZG9ubHkgZWxlbWVudFJlZjogRWxlbWVudFJlZjxIVE1MRWxlbWVudD4sXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSByZWFkb25seSBwb3B1cExpc3RTZXJ2aWNlOiBQb3B1cExpc3RTZXJ2aWNlLFxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgcmVhZG9ubHkgcG9wdXBTZXJ2aWNlOiBQb3B1cFNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZlxuICAgICkge1xuICAgICAgICBzdXBlcihlbGVtZW50UmVmLCBwb3B1cExpc3RTZXJ2aWNlLCBwb3B1cFNlcnZpY2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZSBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgICAgIHN1cGVyLm5nT25DaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICBpZiAoY2hhbmdlc1tcInZhbHVlXCJdKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwTGlzdFZhbHVlcyA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlUG9wdXBMaXN0SXRlbSA9IHRoaXMucG9wdXBMaXN0U2VydmljZS52aWV3TGlzdERhdGFcbiAgICAgICAgICAgICAgICAuc2VsZWN0TWFueShnID0+IGcuc291cmNlKVxuICAgICAgICAgICAgICAgIC53aGVyZShkID0+ICh0aGlzLnZhbHVlIGFzIGFueVtdKS5zb21lKHYgPT4gZC5kYXRhRXF1YWxzKHYpKSlcbiAgICAgICAgICAgICAgICAudG9BcnJheSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG92ZXJyaWRlIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgICAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIG92ZXJyaWRlIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICBzdXBlci5uZ09uSW5pdCgpO1xuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uUG9wdXBMaXN0VmFsdWVDaGFuZ2UoZXZlbnQ6IFBvcHVwTGlzdFZhbHVlQ2hhbmdlRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgJiYgdGhpcy5jb250YWluc1ZhbHVlKGV2ZW50LnZhbHVlLCB0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnZpYSA9PT0gXCJzZWxlY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQudmlhID09PSBcInNlbGVjdGlvblwiICYmIHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQudmFsdWUpO1xuICAgICAgICB0aGlzLnBvcHVwTGlzdFZhbHVlcyA9IGV2ZW50LnZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblNlbGVjdGVkSXRlbVJlbW92ZShldmVudDogRXZlbnQsIHBvcHVwTGlzdEl0ZW06IFBvcHVwTGlzdEl0ZW0pOiB2b2lkIHtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0l0ZW1zID0gdGhpcy52YWx1ZVBvcHVwTGlzdEl0ZW0uZmlsdGVyKGl0ZW0gPT4gIWl0ZW0uZGF0YUVxdWFscyhwb3B1cExpc3RJdGVtLmRhdGEpKSA/PyBbXTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShyZW1haW5pbmdJdGVtcyk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uU2VsZWN0ZWRJdGVtR3JvdXBSZW1vdmUoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdJdGVtcyA9IHRoaXMudmFsdWVQb3B1cExpc3RJdGVtLnNsaWNlKDAsIHRoaXMudmlzaWJsZVRhZ0NvdW50KTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShyZW1haW5pbmdJdGVtcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb250YWluc1ZhbHVlKHBvcHVwTGlzdEl0ZW1zOiBQb3B1cExpc3RJdGVtW10sIHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHBvcHVwTGlzdEl0ZW1zLnNvbWUocG9wdXBMaXN0SXRlbSA9PiBwb3B1cExpc3RJdGVtLmRhdGFFcXVhbHModmFsdWUpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwUmVmPy5vdmVybGF5UmVmLnVwZGF0ZVBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cFJlZj8ub3ZlcmxheVJlZi51cGRhdGVTaXplKHsgd2lkdGg6IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgc3VtbWFyeVRhZ1RleHQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFnQ291bnQgPCAwXG4gICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgIDogdGhpcy50YWdDb3VudCA9PT0gMFxuICAgICAgICAgICAgPyBgJHt0aGlzLnZhbHVlUG9wdXBMaXN0SXRlbS5sZW5ndGh9IGl0ZW0ke3RoaXMudmFsdWVQb3B1cExpc3RJdGVtLmxlbmd0aCA9PT0gMSA/IFwiXCIgOiBcInNcIn1gXG4gICAgICAgICAgICA6IGArJHt0aGlzLnZhbHVlUG9wdXBMaXN0SXRlbS5sZW5ndGggLSB0aGlzLnRhZ0NvdW50fSBpdGVtJHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVQb3B1cExpc3RJdGVtLmxlbmd0aCAtIHRoaXMudGFnQ291bnQgPiAxID8gXCJzXCIgOiBcIlwiXG4gICAgICAgICAgICAgIH1gO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgdmlzaWJsZVRhZ0NvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhZ0NvdW50IDwgMCA/IHRoaXMudmFsdWVQb3B1cExpc3RJdGVtLmxlbmd0aCA6IHRoaXMudGFnQ291bnQgPT09IDAgPyAwIDogdGhpcy50YWdDb3VudDtcbiAgICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwibW9uYS1kcm9wZG93biBtb25hLW11bHRpLXNlbGVjdCBtb25hLWlucHV0LXNlbGVjdG9yXCIgW2F0dHIudGFiaW5kZXhdPVwiZGlzYWJsZWQgPyAtMSA6IDBcIlxuICAgICBbbmdDbGFzc109XCJ7J21vbmEtZGlzYWJsZWQnOiBkaXNhYmxlZH1cIiAgKGNsaWNrKT1cIm9wZW4oKVwiXG4gICAgICNkcm9wZG93bldyYXBwZXI+XG4gICAgPGRpdiBjbGFzcz1cIm1vbmEtaW5wdXQtc2VsZWN0b3ItdmFsdWVcIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxtb25hLWNoaXAgKm5nRm9yPVwibGV0IGl0ZW0gb2YgdmFsdWVQb3B1cExpc3RJdGVtIHwgc2xpY2U6MDp2aXNpYmxlVGFnQ291bnRcIlxuICAgICAgICAgICAgICAgICAgICAgICBbdGFiaW5kZXhdPVwiLTFcIiBbcmVtb3ZhYmxlXT1cInRydWVcIiAocmVtb3ZlKT1cIm9uU2VsZWN0ZWRJdGVtUmVtb3ZlKCRldmVudCwgaXRlbSlcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cIiF0YWdUZW1wbGF0ZVwiPnt7aXRlbS50ZXh0fX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XCJ0YWdUZW1wbGF0ZVwiIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7JGltcGxpY2l0OiBpdGVtLmRhdGF9XCIgKm5nSWY9XCJ0YWdUZW1wbGF0ZVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgPC9tb25hLWNoaXA+XG4gICAgICAgICAgICA8bW9uYS1jaGlwIFt0YWJpbmRleF09XCItMVwiIFtyZW1vdmFibGVdPVwidHJ1ZVwiIChyZW1vdmUpPVwib25TZWxlY3RlZEl0ZW1Hcm91cFJlbW92ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJ0YWdDb3VudCA+PSAwICYmIHZhbHVlUG9wdXBMaXN0SXRlbS5sZW5ndGggPiB0YWdDb3VudFwiPlxuICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiIXN1bW1hcnlUYWdUZW1wbGF0ZVwiPnt7c3VtbWFyeVRhZ1RleHR9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInN1bW1hcnlUYWdUZW1wbGF0ZVwiIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7JGltcGxpY2l0OiB2YWx1ZVBvcHVwTGlzdEl0ZW19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwic3VtbWFyeVRhZ1RlbXBsYXRlXCI+PC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICA8L21vbmEtY2hpcD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cIm1vbmEtaW5wdXQtc2VsZWN0b3ItaWNvblwiPlxuICAgICAgICA8ZmEtaWNvbiBbaWNvbl09XCJkcm9wZG93bkljb25cIj48L2ZhLWljb24+XG4gICAgPC9kaXY+XG48L2Rpdj5cblxuPG5nLXRlbXBsYXRlICNwb3B1cFRlbXBsYXRlPlxuICAgIDxkaXYgKm5nSWY9XCIhIXBvcHVwUmVmXCI+XG4gICAgICAgIDxtb25hLXBvcHVwLWxpc3QgW3RleHRGaWVsZF09XCJ0ZXh0RmllbGRcIiBbdmFsdWVGaWVsZF09XCJ2YWx1ZUZpZWxkXCIgW2dyb3VwRmllbGRdPVwiZ3JvdXBGaWVsZFwiIFtmaWx0ZXJhYmxlXT1cImZpbHRlcmFibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJwb3B1cExpc3RWYWx1ZXNcIiBzZWxlY3Rpb25Nb2RlPVwibXVsdGlwbGVcIiAodmFsdWVDaGFuZ2UpPVwib25Qb3B1cExpc3RWYWx1ZUNoYW5nZSgkZXZlbnQpXCI+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiaXRlbVRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIG1vbmFMaXN0SXRlbVRlbXBsYXRlIGxldC1kYXRhSXRlbSBsZXQtbGlzdEl0ZW09XCJsaXN0SXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyIFtuZ1RlbXBsYXRlT3V0bGV0XT1cIml0ZW1UZW1wbGF0ZSA/PyBudWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyRpbXBsaWNpdDogZGF0YUl0ZW0sIGxpc3RJdGVtfVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJncm91cFRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIG1vbmFMaXN0R3JvdXBUZW1wbGF0ZSBsZXQtZGF0YUl0ZW0gbGV0LWxpc3RJdGVtPVwibGlzdEl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XCJncm91cFRlbXBsYXRlID8/IG51bGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7JGltcGxpY2l0OiBkYXRhSXRlbSwgbGlzdEl0ZW19XCI+PC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L21vbmEtcG9wdXAtbGlzdD5cbiAgICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=